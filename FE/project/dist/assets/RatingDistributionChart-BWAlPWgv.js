import{R as u,r as l,j as e,C as o,a as c,b as d,S as x,c as h}from"./index-Ncio_aso.js";import{R as j,T as f}from"./CategoricalChart-D66cckQl.js";import{B as g}from"./BarChart-Bjk0vAYy.js";import{C as y,X as C,Y as b}from"./CartesianChart-C3n-Q8Q0.js";import{B as N}from"./barSelectors-Cz9a59dm.js";import{C as w}from"./tooltipContext-jPMpA2RG.js";const m=a=>({5:"#10B981",4:"#84CC16",3:"#F59E0B",2:"#FB923C",1:"#EF4444"})[a]||"#6B7280",B=({data:a})=>{const n=l.useMemo(()=>{const s=[5,4,3,2,1],r=new Map(a.map(t=>[t.stars,t]));return s.map(t=>{const i=r.get(t);return{stars:t,count:(i==null?void 0:i.count)||0,percent:(i==null?void 0:i.percent)||0,displayLabel:`${t} ⭐`}})},[a]);if(!l.useMemo(()=>a.length>0&&a.some(s=>s.count>0),[a]))return e.jsxs(o,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5","aria-hidden":"true"}),"Phân bố đánh giá"]})}),e.jsx(h,{children:e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",role:"status","aria-label":"Chưa có đánh giá",children:"Chưa có đánh giá"})})]});const p=l.useCallback(({active:s,payload:r})=>{if(s&&r&&r.length){const t=r[0].payload;return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.displayLabel}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Số lượng: ",t.count]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Tỷ lệ: ",t.percent.toFixed(1),"%"]})]})}return null},[]);return e.jsxs(o,{children:[e.jsx(c,{children:e.jsxs(d,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5","aria-hidden":"true"}),"Phân bố đánh giá"]})}),e.jsxs(h,{className:"pt-4",children:[e.jsx("div",{className:"w-full overflow-x-auto",role:"img","aria-label":"Horizontal bar chart showing rating distribution from 1 to 5 stars",children:e.jsx(j,{width:"100%",height:300,minWidth:300,children:e.jsxs(g,{data:n,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},accessibilityLayer:!0,children:[e.jsx("defs",{children:[5,4,3,2,1].map(s=>e.jsxs("linearGradient",{id:`ratingGradient${s}`,x1:"0",y1:"0",x2:"1",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:m(s),stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:m(s),stopOpacity:.4})]},s))}),e.jsx(y,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),e.jsx(C,{type:"number",stroke:"#6B7280",fontSize:12,tickLine:!1}),e.jsx(b,{type:"category",dataKey:"displayLabel",stroke:"#6B7280",fontSize:12,tickLine:!1,width:60}),e.jsx(f,{content:e.jsx(p,{}),cursor:{fill:"rgba(59, 130, 246, 0.1)"}}),e.jsx(N,{dataKey:"count",radius:[0,8,8,0],children:n.map((s,r)=>e.jsx(w,{fill:`url(#ratingGradient${s.stars})`},`cell-${r}`))})]})})}),e.jsx("div",{className:"mt-4 space-y-2",children:n.map(s=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:s.displayLabel}),e.jsxs("span",{className:"font-medium text-gray-900",children:[s.count," (",s.percent.toFixed(1),"%)"]})]},s.stars))})]})]})},T=u.memo(B);export{T as default};
