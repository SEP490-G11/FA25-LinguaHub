import{R as g,j as e,C as o,a as l,b as d,c,r as f,f as m,v as h,d as n}from"./index-Ncio_aso.js";import{p as x}from"./parseISO-SChRJwQl.js";import{R as j,T as y}from"./CategoricalChart-D66cckQl.js";import{B as N}from"./BarChart-Bjk0vAYy.js";import{C as b,X as C,Y as k}from"./CartesianChart-C3n-Q8Q0.js";import{L as v}from"./Legend-C5xP9T8b.js";import{B as i}from"./barSelectors-Cz9a59dm.js";import"./tooltipContext-jPMpA2RG.js";const w=({data:a})=>{if(!a||a.length===0)return e.jsxs(o,{children:[e.jsx(l,{children:e.jsx(d,{children:"Phân tích doanh thu theo ngày"})}),e.jsx(c,{children:e.jsx("div",{className:"flex items-center justify-center h-[300px] text-gray-500",role:"status","aria-label":"Không có dữ liệu doanh thu",children:"Không có dữ liệu doanh thu trong khoảng thời gian đã chọn"})})]});const u=f.useMemo(()=>a.map(s=>({date:s.date,displayDate:m(x(s.date),"dd MMM",{locale:h}),gmv:s.gmv,commission:s.commission,payout:s.payout})),[a]),p=({active:s,payload:r})=>{if(s&&r&&r.length){const t=r[0].payload;return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:m(x(t.date),"dd MMMM, yyyy",{locale:h})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-gray-600",children:"GMV:"}),e.jsx("span",{className:"font-medium",children:n(t.gmv)})]}),e.jsxs("p",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-gray-600",children:"Commission:"}),e.jsx("span",{className:"font-medium",children:n(t.commission)})]}),e.jsxs("p",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-orange-500"}),e.jsx("span",{className:"text-gray-600",children:"Payout:"}),e.jsx("span",{className:"font-medium",children:n(t.payout)})]})]})]})}return null};return e.jsxs(o,{children:[e.jsx(l,{children:e.jsx(d,{id:"revenue-breakdown-heading",className:"text-lg md:text-xl",children:"Phân tích doanh thu theo ngày"})}),e.jsx(c,{className:"pt-4",children:e.jsx("div",{className:"w-full overflow-x-auto",role:"img","aria-label":"Stacked bar chart showing daily revenue breakdown with GMV, Commission, and Payout",children:e.jsx(j,{width:"100%",height:250,minWidth:300,className:"md:!h-[300px]",children:e.jsxs(N,{data:u,margin:{top:5,right:30,left:20,bottom:5},accessibilityLayer:!0,children:[e.jsx(b,{strokeDasharray:"3 3",stroke:"#E5E7EB"}),e.jsx(C,{dataKey:"displayDate",stroke:"#6B7280",fontSize:12,tickLine:!1}),e.jsx(k,{stroke:"#6B7280",fontSize:12,tickLine:!1,tickFormatter:s=>s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(0)}K`:s.toString()}),e.jsx(y,{content:e.jsx(p,{}),cursor:{fill:"rgba(59, 130, 246, 0.1)"}}),e.jsx(v,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),e.jsx(i,{dataKey:"gmv",name:"GMV",stackId:"revenue",fill:"#3B82F6",radius:[0,0,0,0]}),e.jsx(i,{dataKey:"commission",name:"Commission",stackId:"revenue",fill:"#10B981",radius:[0,0,0,0]}),e.jsx(i,{dataKey:"payout",name:"Payout",stackId:"revenue",fill:"#F97316",radius:[8,8,0,0]})]})})})})]})},L=g.memo(w);export{L as default};
